<div id="headerpage">
  <div class="logoheaderbar">
    <div class="logowrap">
      <%= image_tag('logo.png', alt: 'Mods-Unturned') %>
      <%= render 'shared/alerts' %>
    </div>

  </div>
  <% menu = user_menu %>
  <div class="iconheaderbar">
    <div id="tabs">
      <div class="menu">
        <a class="menuimgwrap <%= get_active('home', 'active-image') %>" href=<%= root_path %>></a> 
        <%= user_img_menu %>
        <a class="menuimgwrap <%= params[:controller] == 'submissions' && params[:action] == 'index' && params[:type] == 'levels' ? 'active-image' : '' %>" href=<%= projects_path(:type => "levels") %>></a>
        <a class="menuimgwrap <%= params[:controller] == 'submissions' && params[:action] == 'index' && params[:type] == 'models' ? 'active-image' : ''  %>" href=<%= projects_path(:type => "models") %>></a>
        <a class="menuimgwrap <%= params[:controller] == 'submissions' && (params[:action] == 'new' || params[:action] == 'edit') ? 'active-image' : '' %>" href=<%= new_submission_path %>></a>  
      </div>
    </div>      
  </div>

  <div id="tabs">
    <div class="menu">
      <div class="menuitem <%= get_active('home') %>"><a href=<%= root_path %>><div class="menutext"><%= t '.home' %></div></a></div>               
      <div class="menuitem <%= params[:user] && params[:controller] == 'submissions' ? 'active' : '' %>"><%= user_menu %></div>              
      <div class="menuitem <%= params[:controller] == 'submissions' && params[:action] == 'index' && params[:type] == 'levels' ? 'active' : '' %>"><a href=<%= projects_path(:type => "levels") %>><div class="menutext"><%= t '.levels' %></div></a></div>
      <div class="menuitem <%= params[:controller] == 'submissions' && params[:action] == 'index' && params[:type] == 'models' ? 'active' : '' %>"><a href=<%= projects_path(:type => "models") %>><div class="menutext"><%= t '.models' %></div></a></div>
      <div class="menuitem <%= params[:controller] == 'submissions' && (params[:action] == 'new' || params[:action] == 'edit') ? 'active' : '' %>"><a href=<%= new_submission_path %>><div class="menutext"><%= t '.upload' %></div></a></div>

      <div class="searchwrap">
        <%= form_tag search_path, method: 'GET' do %>
        <%= text_field :search, :search, class: 'search', type: 'text', placeholder: 'Search...', value: params[:search] ? params[:search][:search] : "", autocomplete: 'off' %>
        <%= image_submit_tag 'search-24.png', class: 'searchbutton' %>
        <% end %>
      </div>        
    </div>
  </div>    
</div>

<script>
  function handleEnter(elem) {
    elem = elem.target;
    var location = -1;
    var image_elem = null;
    if ($(elem).hasClass('menutext')) {
      location = $(elem).parent().parent().index() + 1
      image_elem = $('.menuimgwrap:nth-child('+ location +')')
      $(elem).parent().parent().addClass('hovering');
      $(image_elem).addClass('hovering');
    } else if ($(elem).hasClass('menuimgwrap')) {
      location = $(elem).index() + 1
      image_elem = $('.menuitem:nth-child('+ location +')')
      $(elem).addClass('hovering');
      $(image_elem).addClass('hovering');
    }
  }
  function handleLeave(elem) {
    elem = elem.target;
    var location = -1;
    var image_elem = null;
    if ($(elem).hasClass('menutext')) {
      location = $(elem).parent().parent().index() + 1
      image_elem = $('.menuimgwrap:nth-child('+ location +')')
      $(elem).parent().parent().removeClass('hovering');
      $(image_elem).removeClass('hovering');
    } else if ($(elem).hasClass('menuimgwrap')) {
      location = $(elem).index() + 1
      image_elem = $('.menuitem:nth-child('+ location +')')
      $(elem).removeClass('hovering');
      $(image_elem).removeClass('hovering');
    }
  }
  $('.menuitem, .menuimgwrap').hover(handleEnter, handleLeave);
</script>